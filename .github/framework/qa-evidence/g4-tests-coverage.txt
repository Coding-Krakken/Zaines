
> @subzero/framework@2.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js --coverage --runInBand

(node:35352) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
PASS __tests__/dispatcher.test.ts
  ΓùÅ Console

    console.log
      [DRY RUN] Would dispatch agent:

      at AgentDispatcher.dispatch (dispatcher.ts:66:15)

    console.log
        Agent: backend-engineer

      at AgentDispatcher.dispatch (dispatcher.ts:67:15)

    console.log
        Command: code chat -m backend-engineer --add-file C:\Users\david\Desktop\.subzero\.github\framework ≡ƒôï HANDOFF RECEIVED
      
      Work Item: Issue #42 | PR #123
      Branch: feature/42-test-feature
      
      ≡ƒöù READ THIS HANDOFF FIRST:
      https://github.com/owner/repo/pull/123#issuecomment-123456
      
      Γ£à MANDATORY INSTRUCTIONS:
      1. Open the handoff comment URL above and READ IT COMPLETELY
      2. Quote the "Handoff:" title line to confirm you read it
      3. Complete ALL items in the "Next Actions" checklist
      4. Before dispatching to the next agent, you MUST:
         - Post your own handoff comment using the handoff template
         - Include the comment URL in your dispatch
      
      ≡ƒôª Repository: owner/repo
      ≡ƒöº Your role: Execute the next actions from the handoff
      
      ≡ƒô¥ Additional Context:
      Additional context here
      
      ΓÜá∩╕Å  CRITICAL: If you encounter blockers, post a "Blocked" handoff and dispatch to the appropriate escalation path.
      
      Begin work now.

      at AgentDispatcher.dispatch (dispatcher.ts:68:15)

    console.log
        Prompt: ≡ƒôï HANDOFF RECEIVED
      
      Work Item: Issue #42 | PR #123
      Branch: feature/42-test-feature
      
      ≡ƒöù READ THIS HANDOFF FIRST:
      https://github.com/owner/repo/pull/123#issuecomment-123456
      
      Γ£à MANDATORY INSTRUCTIONS:
      1. Open the handoff comment URL above and READ IT COMPLETELY
      2. Quote the "Handoff:" title line to confirm you read it
      3. Complete ALL items in the "Next Actions" checklist
      4. Before dispatching to the next agent, you MUST:
         - Post your own handoff comment using the handoff template
         - Include the comment URL in your dispatch
      
      ≡ƒôª Repository: owner/repo
      ≡ƒöº Your role: Execute the next actions from the handoff
      
      ≡ƒô¥ Additional Context:
      Additional context here
      
      ΓÜá∩╕Å  CRITICAL: If you encounter blockers, post a "Blocked" handoff and dispatch to the appropriate escalation path.
      
      Begin work now.

      at AgentDispatcher.dispatch (dispatcher.ts:69:15)

    console.log
      ≡ƒôñ Posting handoff comment for frontend-engineer ΓåÆ backend-engineer

      at postHandoffAndDispatch (dispatcher.ts:222:11)

    console.log
      ≡ƒô¿ Dispatching to backend-engineer

      at postHandoffAndDispatch (dispatcher.ts:231:11)

    console.log
      [DRY RUN] Would dispatch agent:

      at AgentDispatcher.dispatch (dispatcher.ts:66:15)

    console.log
        Agent: backend-engineer

      at AgentDispatcher.dispatch (dispatcher.ts:67:15)

    console.log
        Command: code chat -m backend-engineer --add-file C:\Users\david\Desktop\.subzero\.github\framework ≡ƒôï HANDOFF RECEIVED
      
      Work Item: Issue #42 | PR #123
      Branch: feature/42-test
      
      ≡ƒöù READ THIS HANDOFF FIRST:
      https://github.com/owner/repo/pull/123#issuecomment-123456
      
      Γ£à MANDATORY INSTRUCTIONS:
      1. Open the handoff comment URL above and READ IT COMPLETELY
      2. Quote the "Handoff:" title line to confirm you read it
      3. Complete ALL items in the "Next Actions" checklist
      4. Before dispatching to the next agent, you MUST:
         - Post your own handoff comment using the handoff template
         - Include the comment URL in your dispatch
      
      ≡ƒôª Repository: owner/repo
      ≡ƒöº Your role: Execute the next actions from the handoff
      
      ΓÜá∩╕Å  CRITICAL: If you encounter blockers, post a "Blocked" handoff and dispatch to the appropriate escalation path.
      
      Begin work now.

      at AgentDispatcher.dispatch (dispatcher.ts:68:15)

    console.log
        Prompt: ≡ƒôï HANDOFF RECEIVED
      
      Work Item: Issue #42 | PR #123
      Branch: feature/42-test
      
      ≡ƒöù READ THIS HANDOFF FIRST:
      https://github.com/owner/repo/pull/123#issuecomment-123456
      
      Γ£à MANDATORY INSTRUCTIONS:
      1. Open the handoff comment URL above and READ IT COMPLETELY
      2. Quote the "Handoff:" title line to confirm you read it
      3. Complete ALL items in the "Next Actions" checklist
      4. Before dispatching to the next agent, you MUST:
         - Post your own handoff comment using the handoff template
         - Include the comment URL in your dispatch
      
      ≡ƒôª Repository: owner/repo
      ≡ƒöº Your role: Execute the next actions from the handoff
      
      ΓÜá∩╕Å  CRITICAL: If you encounter blockers, post a "Blocked" handoff and dispatch to the appropriate escalation path.
      
      Begin work now.

      at AgentDispatcher.dispatch (dispatcher.ts:69:15)

    console.log
      Γ£à Handoff complete: frontend-engineer ΓåÆ backend-engineer

      at postHandoffAndDispatch (dispatcher.ts:246:11)

    console.log
         Comment: https://github.com/owner/repo/pull/123#issuecomment-123456

      at postHandoffAndDispatch (dispatcher.ts:249:11)

    console.log
      ≡ƒôñ Posting handoff comment for frontend-engineer ΓåÆ backend-engineer

      at postHandoffAndDispatch (dispatcher.ts:222:11)

    console.log
      ≡ƒô¿ Dispatching to backend-engineer

      at postHandoffAndDispatch (dispatcher.ts:231:11)

PASS __tests__/parallel-dispatch-controller.test.ts
PASS __tests__/github-handoff-provider.test.ts
  ΓùÅ Console

    console.log
      [DRY RUN] Would post comment:

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:297:15)

    console.log
        Target: pr #123

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:298:15)

    console.log
        Body: # Agent Handoff Template
      
      <!-- 
      This template MUST be used for all agent-to-agent handoffs.
      All sections are REQUIRED, even if marked "N/A".
      -->
      
      ## Handoff
      
      **Agent:** frontend-engineer  
      *...

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:299:15)

    console.log
      [DRY RUN] Would post comment:

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:297:15)

    console.log
        Target: pr #123

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:298:15)

    console.log
        Body: # Agent Handoff Template
      
      <!-- 
      This template MUST be used for all agent-to-agent handoffs.
      All sections are REQUIRED, even if marked "N/A".
      -->
      
      ## Handoff
      
      **Agent:** frontend-engineer  
      *...

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:299:15)

    console.log
      [DRY RUN] Would post comment:

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:297:15)

    console.log
        Target: issue #42

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:298:15)

    console.log
        Body: # Agent Handoff Template
      
      <!-- 
      This template MUST be used for all agent-to-agent handoffs.
      All sections are REQUIRED, even if marked "N/A".
      -->
      
      ## Handoff
      
      **Agent:** frontend-engineer  
      *...

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:299:15)

    console.log
      [DRY RUN] Would post comment:

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:297:15)

    console.log
        Target: pr #123

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:298:15)

    console.log
        Body: # Agent Handoff Template
      
      <!-- 
      This template MUST be used for all agent-to-agent handoffs.
      All sections are REQUIRED, even if marked "N/A".
      -->
      
      ## Handoff
      
      **Agent:** frontend-engineer  
      *...

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:299:15)

    console.log
      [DRY RUN] Would post comment:

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:297:15)

    console.log
        Target: pr #123

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:298:15)

    console.log
        Body: # Agent Handoff Template
      
      <!-- 
      This template MUST be used for all agent-to-agent handoffs.
      All sections are REQUIRED, even if marked "N/A".
      -->
      
      ## Handoff
      
      **Agent:** frontend-engineer  
      *...

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:299:15)

    console.log
      [DRY RUN] Would post comment:

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:297:15)

    console.log
        Target: issue #42

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:298:15)

    console.log
        Body: # Agent Handoff Template
      
      <!-- 
      This template MUST be used for all agent-to-agent handoffs.
      All sections are REQUIRED, even if marked "N/A".
      -->
      
      ## Handoff
      
      **Agent:** frontend-engineer  
      *...

      at GitHubHandoffProvider.postComment (github-handoff-provider.ts:299:15)

PASS __tests__/comment-template-service.test.ts
PASS __tests__/context-resolver.test.ts
PASS __tests__/parallel-dispatch-events.test.ts
PASS __tests__/context-hierarchy.test.ts
PASS __tests__/parallel-dispatch-retry-timeout.test.ts
PASS __tests__/workflow-orchestrator-policy.test.ts
PASS __tests__/wave-scheduler.test.ts
PASS __tests__/hybrid-orchestrator.test.ts
PASS __tests__/definition-of-done-gate.test.ts
PASS __tests__/dependency-graph.test.ts
PASS __tests__/workflow-telemetry.test.ts
---------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------
File                             | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                 
---------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------
All files                        |    87.9 |    69.02 |   91.07 |   88.23 |                                                                   
 hybrid-orchestrator.ts          |     100 |    77.77 |     100 |     100 | 63,103                                                            
 parallel-dispatch-controller.ts |    78.9 |    70.58 |      75 |    78.4 | 45-46,109,209,219-230,253-258,305-310,331,335,394,400,404,408,412 
 wave-scheduler.ts               |    94.2 |    66.66 |     100 |   96.87 | 74,123                                                            
 workflow-telemetry.ts           |      95 |    65.51 |     100 |      95 | 190,228,259                                                       
---------------------------------|---------|----------|---------|---------|-------------------------------------------------------------------

Test Suites: 14 passed, 14 total
Tests:       9 skipped, 50 passed, 59 total
Snapshots:   0 total
Time:        7.097 s
Ran all test suites.
